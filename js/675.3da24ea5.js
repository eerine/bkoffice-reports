"use strict";(self["webpackChunkvue_moleq_backoffice"]=self["webpackChunkvue_moleq_backoffice"]||[]).push([[675],{1917:function(e,t,a){a.d(t,{A:function(){return b}});var s=a(641),n=a(3751),r=a(33);const l={class:"date-type-wrapper"},i={class:"filter-btn"},o=(0,s.Lk)("span",{id:"date-selection"},"Date Range",-1),d={class:"display-selection-wrapper"},p=["value","id","checked"],c=["for"];function u(e,t,a,u,y,h){const D=(0,s.g2)("fa"),m=(0,s.g2)("popup");return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.bF)(m,{class:"filter-popup-wrapper"},{header:(0,s.k6)((()=>[(0,s.Lk)("button",i,[o,(0,s.bF)(D,{icon:"angle-down"})])])),content:(0,s.k6)((()=>[(0,s.Lk)("div",d,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(y.types,(e=>((0,s.uX)(),(0,s.CE)("span",{key:e.id},[(0,s.bo)((0,s.Lk)("input",{type:"radio",name:"date_type",value:e.name,"onUpdate:modelValue":t[0]||(t[0]=e=>h.checkedDateType=e),onChange:t[1]||(t[1]=(...e)=>h.selectedDateType&&h.selectedDateType(...e)),id:e.id,checked:y.currentDateType==e.name},null,40,p),[[n.XL,h.checkedDateType]]),(0,s.bF)(D,{class:"checkmark",icon:"check"}),(0,s.Lk)("label",{for:e.id},(0,r.v_)(e.name),9,c)])))),128))])])),_:1})])}var y=a(5093),h=a.n(y),D=a(5987),m={components:{Popup:D.A},props:{currentStartDate:{type:[String,Number,Date],default:""},currentEndDate:{type:[String,Number,Date],default:""},defaultDateType:{type:String,default:"Date Range"}},data(){return{types:[{id:"single",name:"Single Date"},{id:"range",name:"Date Range"},{id:"today",name:"Today"},{id:"week",name:"This Week"}],currentDateType:this.defaultDateType}},watch:{defaultDateType:function(){this.currentDateType=this.defaultDateType},currentStartDate:function(){const e=h()(this.currentStartDate).format("MMM DD, yyyy"),t=h()(this.currentEndDate).format("MMM DD, yyyy"),a=h()().startOf("day").format("MMM DD, yyyy"),s=h()().startOf("week").format("MMM DD, yyyy"),n=h()().endOf("week").format("MMM DD, yyyy");"Today"==this.currentDateType?e!=a&&(this.currentDateType="Single Date"):"This Week"==this.currentDateType?e!=s&&(this.currentDateType="Date Range"):"Date Range"==this.currentDateType?e==s&&t==n&&(this.currentDateType="This Week"):"Single Date"==this.currentDateType&&e==a&&(this.currentDateType="Today");var r=this.currentDateType,l=document.querySelector('input[name="date_type"]:checked'),i=document.querySelector("#date-selection");l&&(r=document.querySelector('label[for="'+l.id+'"]').innerHTML),i.innerHTML=r},currentEndDate:function(){const e=h()(this.currentStartDate).format("MMM DD, yyyy"),t=h()(this.currentEndDate).format("MMM DD, yyyy"),a=h()().endOf("week").format("MMM DD, yyyy"),s=h()().startOf("week").format("MMM DD, yyyy");"This Week"==this.currentDateType?t!=a&&(this.currentDateType="Date Range"):"Date Range"==this.currentDateType&&e==s&&t==a&&(this.currentDateType="This Week");var n=this.currentDateType,r=document.querySelector('input[name="date_type"]:checked'),l=document.querySelector("#date-selection");r&&(n=document.querySelector('label[for="'+r.id+'"]').innerHTML),l.innerHTML=n}},methods:{selectedDateType(){if("Single Date"==this.currentDateType)this.$emit("changeStartDate","");else if("Date Range"==this.currentDateType)this.$emit("changeStartDate",""),this.$emit("changeEndDate","");else if("Today"==this.currentDateType){const e=h()().startOf("day").toDate();this.$emit("changeStartDate",e)}else if("This Week"==this.currentDateType){const e=h()().startOf("week").toDate(),t=h()().endOf("week").toDate();this.$emit("changeStartDate",e),this.$emit("changeEndDate",t)}var e="Nothing selected",t=document.querySelector('input[name="date_type"]:checked'),a=document.querySelector("#date-selection");t&&(e=document.querySelector('label[for="'+t.id+'"]').innerHTML),a.innerHTML=e}},computed:{checkedDateType:{get(){return this.currentDateType},set(e){this.currentDateType=e,this.$emit("changeDateType",e)}}}},f=a(6262);const k=(0,f.A)(m,[["render",u]]);var b=k},694:function(e,t,a){a.r(t),a.d(t,{default:function(){return Re}});var s=a(641),n=a(33),r=a(3751),l=a(517);const i={class:"dept-wrapper container"},o={key:0,class:"loading-overlay"},d=(0,s.Lk)("div",{class:"overlay-content"},[(0,s.Lk)("img",{src:l,style:{width:"60px"}})],-1),p=[d],c={class:"content-wrapper"},u={class:"filter-toggle-wrapper",ref:"toggleFilter"},y={class:"filter-content-wrapper"},h={class:"filter-btn"},D={id:"store-selection"},m={class:"display-selection-wrapper"},f=["id","value"],k=["for"],b={class:"filter-header"},g={class:"filter-btn"},v=(0,s.Lk)("span",{id:"selection"},"Analysis Department",-1),T={class:"display-selection-wrapper"},L=(0,s.Lk)("label",{for:"regular"},"Standard Department",-1),_=(0,s.Lk)("label",{for:"analysis"},"Analysis Department",-1),S={key:0,class:"invalid-search-msg"},C=(0,s.Lk)("span",null,"Invalid date range",-1),F={key:0,class:"calendar-wrapper"},w={key:1,class:"calendar-wrapper"},x={key:2,class:"filter-content-wrapper"},A=(0,s.Lk)("label",{class:"filter-label"},"Search By",-1),M=(0,s.Lk)("span",null,"Stn # ",-1),R=(0,s.Lk)("span",null,"Cashier #",-1),E={key:0},W={key:0,class:"no-results"},$={key:1,class:"dept-table-wrapper"},P={class:"table-header-wrapper"},N={class:"table-header"},X={key:0},q={key:1},H={class:"table-btn-group"},O={class:"print-btn btn btn-circle",onclick:"window.print()"},I={class:"dept-total"},V={class:"bold-600"},Y={class:"bold-600"},Q={class:"bold-600"},B={key:0,class:"doughnut-chart"},U={key:1},z={key:0,class:"no-results"},K={key:1,class:"dept-table-wrapper"},J={class:"table-header-wrapper"},G={class:"table-header"},j={key:0},Z={key:1},ee={class:"table-btn-group"},te={class:"print-btn btn btn-circle",onclick:"window.print()"},ae={class:"first-col"},se=["onClick"],ne={class:"expand-btn"},re=(0,s.Lk)("p",null,[(0,s.eW)("Net Item Sales"),(0,s.Lk)("br"),(0,s.eW)("Amount ($)")],-1),le=(0,s.Lk)("p",null,[(0,s.eW)("Transactions"),(0,s.Lk)("br"),(0,s.eW)("Count")],-1),ie={class:"more-info-wrapper"},oe=(0,s.Lk)("span",{class:"bold-600"},"Transactions Count",-1),de=(0,s.Lk)("span",{class:"bold-600"},"%",-1),pe={class:"mobile-dt-footer"},ce={class:"bold-600"},ue={class:"bold-600"},ye={class:"dept-total"},he={class:"bold-600"},De={class:"bold-600"},me={class:"bold-600"},fe={class:"bold-600"},ke={class:"bold-600"},be={class:"bold-600"};function ge(e,t,a,l,d,ge){const ve=(0,s.g2)("Header"),Te=(0,s.g2)("fa"),Le=(0,s.g2)("popup"),_e=(0,s.g2)("DateType"),Se=(0,s.g2)("DatePicker"),Ce=(0,s.g2)("Column"),Fe=(0,s.g2)("Row"),we=(0,s.g2)("ColumnGroup"),xe=(0,s.g2)("DataTable"),Ae=(0,s.g2)("VueApexCharts");return(0,s.uX)(),(0,s.CE)("div",i,[d.loading?((0,s.uX)(),(0,s.CE)("div",o,p)):(0,s.Q3)("",!0),(0,s.bF)(ve),(0,s.Lk)("div",c,[(0,s.Lk)("div",u,[(0,s.Lk)("span",null,[(0,s.Lk)("button",{class:(0,n.C4)(["filter-toggle",d.isFilterActive?"collasped":""]),onClick:t[0]||(t[0]=e=>ge.toggleFilter())},[(0,s.bF)(Te,{icon:["fas","sliders"]})],2)]),(0,s.Lk)("div",{class:(0,n.C4)(["filter-wrapper",[d.isFilterActive?"slide-in":"slide-out"]])},[(0,s.Lk)("div",y,[(0,s.bF)(Le,{class:"filter-popup-wrapper stores-popup"},{header:(0,s.k6)((()=>[(0,s.Lk)("button",h,[(0,s.Lk)("span",D,(0,n.v_)(d.selectedCompanies.companyName),1),(0,s.bF)(Te,{icon:"angle-down"})])])),content:(0,s.k6)((()=>[(0,s.Lk)("div",m,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.companies,(e=>((0,s.uX)(),(0,s.CE)("span",{key:e.id},[(0,s.bo)((0,s.Lk)("input",{type:"radio",name:"store_type",id:e.id,value:e,"onUpdate:modelValue":t[1]||(t[1]=e=>d.selectedCompanies=e),onChange:t[2]||(t[2]=(...e)=>ge.selectedStore&&ge.selectedStore(...e))},null,40,f),[[r.XL,d.selectedCompanies]]),(0,s.bF)(Te,{class:"checkmark",icon:"check"}),(0,s.Lk)("label",{for:e.id},(0,n.v_)(e.companyName),9,k)])))),128))])])),_:1}),(0,s.Lk)("div",b,[(0,s.bF)(Le,{class:"filter-popup-wrapper"},{header:(0,s.k6)((()=>[(0,s.Lk)("button",g,[v,(0,s.bF)(Te,{icon:"angle-down"})])])),content:(0,s.k6)((()=>[(0,s.Lk)("div",T,[(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{type:"radio",name:"dept_type",value:"Standard","onUpdate:modelValue":t[3]||(t[3]=e=>d.selectedRptType=e),onChange:t[4]||(t[4]=(...e)=>ge.selectedType&&ge.selectedType(...e)),id:"regular",checked:"checked"},null,544),[[r.XL,d.selectedRptType]]),(0,s.bF)(Te,{class:"checkmark",icon:"check"}),L]),(0,s.Lk)("span",null,[(0,s.bo)((0,s.Lk)("input",{type:"radio",name:"dept_type",value:"Analysis","onUpdate:modelValue":t[5]||(t[5]=e=>d.selectedRptType=e),onChange:t[6]||(t[6]=(...e)=>ge.selectedType&&ge.selectedType(...e)),id:"analysis"},null,544),[[r.XL,d.selectedRptType]]),(0,s.bF)(Te,{class:"checkmark",icon:"check"}),_])])])),_:1}),(0,s.Lk)("button",{class:"search-btn btn btn-square",onClick:t[7]||(t[7]=e=>ge.searchWithFilter())},[(0,s.bF)(Te,{icon:"magnifying-glass"})])]),(0,s.bF)(_e,{onChangeDateType:t[8]||(t[8]=e=>d.dateType=e),onChangeStartDate:t[9]||(t[9]=e=>d.startDate=e),onChangeEndDate:t[10]||(t[10]=e=>d.endDate=e),currentStartDate:d.startDate,currentEndDate:d.endDate},null,8,["currentStartDate","currentEndDate"]),(0,s.bF)(r.eB,{name:"fade"},{default:(0,s.k6)((()=>[d.invalidDateRange?((0,s.uX)(),(0,s.CE)("p",S,[(0,s.bF)(Te,{icon:"triangle-exclamation"}),C])):(0,s.Q3)("",!0)])),_:1}),"Single Date"==d.dateType||"Today"==d.dateType?((0,s.uX)(),(0,s.CE)("div",F,[(0,s.bF)(Se,{onChangeDateValue:t[11]||(t[11]=e=>d.startDate=e),defaultDate:d.startDate,labelEnableText:"Date"},null,8,["defaultDate"])])):(0,s.Q3)("",!0),"Date Range"==d.dateType||"This Week"==d.dateType?((0,s.uX)(),(0,s.CE)("div",w,[(0,s.bF)(Se,{onChangeDateValue:t[12]||(t[12]=e=>d.startDate=e),defaultDate:d.startDate,startDate:d.endDate,labelEnableText:"From"},null,8,["defaultDate","startDate"]),(0,s.bF)(Se,{onChangeDateValue:t[13]||(t[13]=e=>d.endDate=e),defaultDate:d.endDate,startDate:d.startDate,alwaysStartDate:!0,labelEnableText:"To"},null,8,["defaultDate","startDate"])])):(0,s.Q3)("",!0),"Standard"==d.selectedRptType?((0,s.uX)(),(0,s.CE)("div",x,[A,(0,s.Lk)("label",null,[M,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>d.stn=e)},null,512),[[r.Jo,d.stn]])]),(0,s.Lk)("label",null,[R,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=e=>d.cashier=e)},null,512),[[r.Jo,d.cashier]])])])):(0,s.Q3)("",!0)])],2)],512),(0,s.Lk)("div",{class:"content",style:(0,n.Tr)({height:"calc("+d.windowHeight+"px - 90px)"})},[d.standardChart?((0,s.uX)(),(0,s.CE)("div",E,[!d.empty&&d.depts.length<=0?((0,s.uX)(),(0,s.CE)("div",W,[(0,s.bF)(Te,{icon:["fas","magnifying-glass"]}),(0,s.eW)("No search results found")])):(0,s.Q3)("",!0),!d.empty&&d.depts.length>0?((0,s.uX)(),(0,s.CE)("div",$,[(0,s.bF)(xe,{id:"rpt-table",class:"dept-tb",value:d.depts,exportFilename:ge.fileName,ref:"dt"},{header:(0,s.k6)((()=>[(0,s.Lk)("div",P,[(0,s.Lk)("div",N,[(0,s.Lk)("h3",null,(0,n.v_)(e.$t("header."+this.$route.name))+" - "+(0,n.v_)(d.storeName),1),d.singleDateActive?((0,s.uX)(),(0,s.CE)("p",X,"As of date "+(0,n.v_)(ge.formatDate(d.rptStartDate)),1)):d.dateRangeActive?((0,s.uX)(),(0,s.CE)("p",q,"As of date "+(0,n.v_)(ge.formatDate(d.rptStartDate))+" - "+(0,n.v_)(ge.formatDate(d.rptEndDate)),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",H,[(0,s.Lk)("button",O,[(0,s.bF)(Te,{icon:"print"})]),(0,s.Lk)("button",{class:"excel-btn btn btn-circle",onClick:t[16]||(t[16]=e=>ge.exportCSV(e))},[(0,s.bF)(Te,{icon:"file-csv"})])])])])),default:(0,s.k6)((()=>[(0,s.bF)(Ce,{field:"dep_name",header:"Department"},{body:(0,s.k6)((e=>[(0,s.eW)((0,n.v_)(e.data.dep_no+" "+e.data.dep_name),1)])),_:1}),(0,s.bF)(Ce,{field:"amount",header:"Amount ($)",class:"amount"},{body:(0,s.k6)((e=>[(0,s.eW)((0,n.v_)(ge.formatPrice(e.data.amount)),1)])),_:1}),(0,s.bF)(Ce,{field:"percentage",header:"%",class:"percentage"},{body:(0,s.k6)((e=>[(0,s.eW)((0,n.v_)(ge.formatPrice(e.data.percentage))+"%",1)])),_:1}),(0,s.bF)(we,{type:"footer"},{default:(0,s.k6)((()=>[(0,s.bF)(Fe,null,{default:(0,s.k6)((()=>[(0,s.bF)(Ce,{footer:"Total",footerStyle:"text-align:right"}),(0,s.bF)(Ce,{footer:ge.formatPrice(d.deptsTotal),footerStyle:"text-align:right"},null,8,["footer"]),(0,s.bF)(Ce,{footer:""})])),_:1})])),_:1})])),_:1},8,["value","exportFilename"]),(0,s.Lk)("div",I,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",V,[(0,s.eW)("Department Total($): "),(0,s.Lk)("span",Y,(0,n.v_)(ge.formatPrice(d.deptsTotal)),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Member & VIP Discount($): "),(0,s.Lk)("span",null,"-"+(0,n.v_)(ge.formatPrice(ge.deptsDiscount)),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Taxes($): "),(0,s.Lk)("span",null,(0,n.v_)(ge.formatPrice(d.deptsTax)),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Total Accounted For($):"),(0,s.Lk)("span",Q,(0,n.v_)(ge.formatPrice(d.deptsTotal-ge.deptsDiscount+d.deptsTax)),1)])]),d.depts.length>0?((0,s.uX)(),(0,s.CE)("div",B,[(0,s.bF)(Ae,{options:ge.setDoughnutChartOptions,series:d.deptsAmount},null,8,["options","series"])])):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),d.analysisChart?((0,s.uX)(),(0,s.CE)("div",U,[!d.empty&&d.analysisDepts.length<=0?((0,s.uX)(),(0,s.CE)("div",z,[(0,s.bF)(Te,{icon:["fas","magnifying-glass"]}),(0,s.eW)("No search results found")])):(0,s.Q3)("",!0),!d.empty&&d.analysisDepts.length>0?((0,s.uX)(),(0,s.CE)("div",K,[(0,s.bF)(xe,{id:"rpt-table",class:"dept-tb",expandedRows:l.state.expandedRows,"onUpdate:expandedRows":t[18]||(t[18]=e=>l.state.expandedRows=e),dataKey:"dep_no",value:d.analysisDepts,exportFilename:ge.fileName,ref:"dt"},{header:(0,s.k6)((()=>[(0,s.Lk)("div",J,[(0,s.Lk)("div",G,[(0,s.Lk)("h3",null,(0,n.v_)(e.$t("header."+this.$route.name))+" - "+(0,n.v_)(d.storeName),1),d.singleDateActive?((0,s.uX)(),(0,s.CE)("p",j,"As of date "+(0,n.v_)(ge.formatDate(d.rptStartDate)),1)):d.dateRangeActive?((0,s.uX)(),(0,s.CE)("p",Z,"As of date "+(0,n.v_)(ge.formatDate(d.rptStartDate))+" - "+(0,n.v_)(ge.formatDate(d.rptEndDate)),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",ee,[(0,s.Lk)("button",te,[(0,s.bF)(Te,{icon:"print"})]),(0,s.Lk)("button",{class:"excel-btn btn btn-circle",onClick:t[17]||(t[17]=e=>ge.exportCSV(e))},[(0,s.bF)(Te,{icon:"file-excel"})])])])])),expansion:(0,s.k6)((e=>[(0,s.Lk)("div",ie,[(0,s.Lk)("p",null,[oe,(0,s.eW)(" "+(0,n.v_)(ge.formatNumber(e.data.trn_dep_cnt)),1)]),(0,s.Lk)("p",null,[de,(0,s.eW)(" "+(0,n.v_)(ge.formatPrice(e.data.cnt_percent))+"%",1)])])])),footer:(0,s.k6)((()=>[(0,s.Lk)("div",pe,[(0,s.Lk)("p",ce,"Total Amount($): "+(0,n.v_)(ge.formatPrice(d.analysisDeptsTax+d.analysisDeptsTotal)),1),(0,s.Lk)("p",ue,"Number of Transactions: "+(0,n.v_)(ge.formatNumber(ge.totalAnalysisTransCount)),1)])])),default:(0,s.k6)((()=>[(0,s.bF)(Ce,{field:"dep_name",header:"Department"},{body:(0,s.k6)((e=>[(0,s.Lk)("p",ae,(0,n.v_)(e.data.dep_no+" "+e.data.dep_name),1),(0,s.Lk)("a",{class:"more-info-btn",onClick:(0,r.D$)((t=>l.onExpandRow(e.data.dep_no)),["stop"])},[(0,s.Lk)("span",{class:(0,n.C4)([l.state.expandedRows[e.data.dep_no]?"expand":""])},[(0,s.Lk)("button",ne,[(0,s.bF)(Te,{icon:"caret-right"})])],2),(0,s.eW)(" "+(0,n.v_)(e.data.dep_no+" "+e.data.dep_name),1)],8,se)])),_:1}),(0,s.bF)(Ce,{field:"amount",class:"amount"},{header:(0,s.k6)((()=>[re])),body:(0,s.k6)((e=>[(0,s.eW)((0,n.v_)(ge.formatPrice(e.data.amount)),1)])),_:1}),(0,s.bF)(Ce,{field:"amt_percent",header:"%",class:"percentage"},{body:(0,s.k6)((e=>[(0,s.eW)((0,n.v_)(ge.formatPrice(e.data.amt_percent))+"%",1)])),_:1}),(0,s.bF)(Ce,{field:"trn_dep_cnt",class:"count"},{header:(0,s.k6)((()=>[le])),body:(0,s.k6)((e=>[(0,s.eW)((0,n.v_)(ge.formatNumber(e.data.trn_dep_cnt)),1)])),_:1}),(0,s.bF)(Ce,{field:"cnt_percent",header:"%",class:"percentage"},{body:(0,s.k6)((e=>[(0,s.eW)((0,n.v_)(ge.formatPrice(e.data.cnt_percent))+"%",1)])),_:1}),(0,s.bF)(we,{type:"footer"},{default:(0,s.k6)((()=>[(0,s.bF)(Fe,null,{default:(0,s.k6)((()=>[(0,s.bF)(Ce,{class:"dt-footer",footer:"Total",footerStyle:"text-align:right"}),(0,s.bF)(Ce,{class:"dt-footer",footer:ge.formatPrice(d.analysisDeptsTax+d.analysisDeptsTotal),footerStyle:"text-align:right"},null,8,["footer"]),(0,s.bF)(Ce,{class:"dt-footer",footer:ge.formatNumber(ge.totalAnalysisTransCount),colspan:2,footerStyle:"text-align:right"},null,8,["footer"]),(0,s.bF)(Ce,{class:"dt-footer",footer:""})])),_:1})])),_:1})])),_:1},8,["expandedRows","value","exportFilename"]),(0,s.Lk)("div",ye,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",he,[(0,s.eW)("Department Total($): "),(0,s.Lk)("span",De,(0,n.v_)(ge.formatPrice(d.analysisDeptsData.sale_total)),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Bottle Deposits($): "),(0,s.Lk)("span",null,(0,n.v_)(ge.formatPrice(d.analysisDeptsData.bottle_dept)),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Member & VIP Discount($): "),(0,s.Lk)("span",null,(0,n.v_)(ge.formatPrice(d.analysisDeptsData.members_discnt)),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Taxes($): "),(0,s.Lk)("span",null,(0,n.v_)(ge.formatPrice(d.analysisDeptsData.tax)),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Surcharge($): "),(0,s.Lk)("span",null,(0,n.v_)(ge.formatPrice(d.analysisDeptsData.subchg)),1)]),(0,s.Lk)("li",me,[(0,s.eW)("Net Amount($):"),(0,s.Lk)("span",fe,(0,n.v_)(ge.formatPrice(d.analysisDeptsData.net_amount)),1)])]),(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,[(0,s.eW)("Misc Trans Items($): "),(0,s.Lk)("span",null,(0,n.v_)(ge.formatPrice(d.analysisDeptsData.misc_amt)),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Coupons($): "),(0,s.Lk)("span",null,(0,n.v_)(ge.formatPrice(d.analysisDeptsData.coupon)),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Reward($): "),(0,s.Lk)("span",null,(0,n.v_)(ge.formatPrice(d.analysisDeptsData.reward)),1)]),(0,s.Lk)("li",null,[(0,s.eW)("Redemption($): "),(0,s.Lk)("span",null,(0,n.v_)(ge.formatPrice(d.analysisDeptsData.redemption)),1)]),(0,s.Lk)("li",ke,[(0,s.eW)("Total Accounted For($):"),(0,s.Lk)("span",be,(0,n.v_)(ge.formatPrice(d.analysisDeptsData.total_accounted)),1)])])]),(0,s.bF)(Ae,{height:"600",options:ge.setBarChartOptions,series:ge.setBarChartData},null,8,["options","series"])])])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)],4)])])}var ve=a(953),Te=a(4335),Le=a(5093),_e=a.n(Le),Se=a(9121),Ce=a(5987),Fe=a(5011),we=a(1917),xe={components:{Header:Se.A,Popup:Ce.A,DatePicker:Fe.A,DateType:we.A},setup(){const e=(0,ve.Kh)({expandedRows:{}}),t=t=>{const a=t in e.expandedRows;a?delete e.expandedRows[t]:e.expandedRows[t]=!0,e.expandedRows={...e.expandedRows}};return{state:e,onExpandRow:t}},data(){return{windowHeight:window.innerHeight,isFilterActive:!0,empty:!0,companies:[{id:1027,companyName:"Apple Supermarket 1"},{id:1221,companyName:"Apple Supermarket 2"}],invalidStore:!1,selectedCompanies:[],storeName:"",loading:!1,depts:[],deptsId:[],deptsAmount:[],deptsDisplay:[],deptsTax:"",deptsTotal:"",analysisDeptsData:[],analysisDepts:[],analysisDeptsDisplay:[],analysisDeptsId:[],analysisDeptsAmount:[],analysisDeptsTransCount:[],analysisDeptsTax:"",analysisDeptsTotal:"",analysisDeptsTransCountTotal:"",startDate:"",endDate:"",rptStartDate:"",rptEndDate:"",selectedRptType:"Analysis",dateType:"Date Range",standardChart:!1,analysisChart:!0,stn:"",cashier:"",invalidDateRange:!1,singleDateActive:!1,dateRangeActive:!1}},mounted(){this.selectedCompanies=this.companies[0],this.$nextTick((()=>{window.addEventListener("resize",this.onResize)}))},beforeDestroy(){window.removeEventListener("resize",this.onResize)},methods:{toggleFilter(){this.isFilterActive=!this.isFilterActive},formatPrice(e){if(!e||0==e)return"0.00";let t=(e/1).toFixed(2).replace(",",".");return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},formatNumber(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},formatDate(e){return _e()(e).format("MMM DD, yyyy")},exportCSV(){this.$refs.dt.exportCSV()},selectedType(){var e="Nothing selected",t=document.querySelector('input[name="dept_type"]:checked'),a=document.querySelector("#selection");t&&(e=document.querySelector('label[for="'+t.id+'"]').innerHTML),a.innerHTML=e},selectedStore(){var e="Nothing selected",t=document.querySelector('input[name="store_type"]:checked'),a=document.querySelector("#store-selection");t&&(e=document.querySelector('label[for="'+t.id+'"]').innerHTML),a.innerHTML=e},searchWithFilter(){if(this.loading=!0,this.isFilterActive=!1,this.depts=[],this.analysisDepts=[],this.storeName=this.selectedCompanies.companyName,this.rptStartDate="",this.rptEndDate="","Single Date"==this.dateType||"Today"==this.dateType)this.rptStartDate=_e()(this.startDate).format("YYYY-MM-DD"),this.rptEndDate=_e()(this.startDate).format("YYYY-MM-DD"),this.singleDateActive=!0,this.dateRangeActive=!1;else if("Date Range"==this.dateType||"This Week"==this.dateType){this.dateRangeActive=!0,this.singleDateActive=!1;const e=Math.round((this.endDate-this.startDate)/864e5);this.startDate&&this.endDate&&e>=0?(this.invalidDateRange=!1,this.rptStartDate=_e()(this.startDate).format("YYYY-MM-DD"),this.rptEndDate=_e()(this.endDate).format("YYYY-MM-DD")):e<0?(this.loading=!1,this.isFilterActive=!0,this.invalidDateRange=!0,this.rptStartDate="",this.rptEndDate=""):(this.loading=!1,this.rptStartDate="",this.rptEndDate="")}"Standard"==this.selectedRptType?(this.standardChart=!0,this.analysisChart=!1,Te.A.get("https://cloudbackofficereportapidev.azurewebsites.net/Report/Department",{headers:{marketid:this.selectedCompanies.id},params:{sDate:this.rptStartDate,eDate:this.rptEndDate,stn:""==this.stn?0:this.stn,cashier:""==this.cashier?0:this.cashier}}).then((e=>{this.depts=e.data.datas.deptSummaries,this.deptsTax=e.data.datas.tax,this.deptsTotal=e.data.datas.total;for(let t=0;t<this.depts.length;t++)this.deptsId[t]=e.data.datas.deptSummaries[t].dep_no,this.deptsDisplay[t]=e.data.datas.deptSummaries[t].dep_name,this.deptsAmount[t]=e.data.datas.deptSummaries[t].amount})).catch((e=>console.log(e.response))).finally((()=>{this.loading=!1,this.empty=!1}))):"Analysis"==this.selectedRptType&&(this.standardChart=!1,this.analysisChart=!0,Te.A.get("https://cloudbackofficereportapidev.azurewebsites.net/Report/Department/Analysis",{headers:{marketid:this.selectedCompanies.id},params:{sDate:this.rptStartDate,eDate:this.rptEndDate}}).then((e=>{this.analysisDeptsData=e.data.datas,this.analysisDepts=e.data.datas.deptSummaryAnalyses,this.analysisDeptsTax=e.data.datas.tax,this.analysisDeptsTotal=e.data.datas.sale_total;for(let t=0;t<this.analysisDepts.length;t++)this.analysisDeptsId[t]=e.data.datas.deptSummaryAnalyses[t].dep_no,this.analysisDeptsDisplay[t]=e.data.datas.deptSummaryAnalyses[t].dep_name,this.analysisDeptsAmount[t]=e.data.datas.deptSummaryAnalyses[t].amount,this.analysisDeptsTransCount[t]=e.data.datas.deptSummaryAnalyses[t].trn_dep_cnt})).catch((e=>console.log(e.response))).finally((()=>{this.loading=!1,this.empty=!1})))}},computed:{fileName(){let e=this.$route.name+" "+this.startDate+"-"+this.endDate;return e},setDoughnutChartOptions(){return{chart:{type:"donut",fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif'},labels:this.deptsDisplay,colors:["#72f9b4","#07e2f6","#00baff","#c6e430","#2ad4e3","#e329e2","#e6a4f0","#8964e8","#aaa0ff","#c4e328","#00bdf6","#fd9106","#efefef","#2c990f"],legend:{position:"bottom",floating:!0},responsive:[{breakpoint:1320,options:{legend:{floating:!1},chart:{height:1e3}}}],dataLabels:{formatter:function(e){return e.toFixed(2)+"%"},style:{fontSize:"15px"}},tooltip:{enabled:!1},states:{hover:{filter:{type:"none"}}},plotOptions:{pie:{expandOnClick:!1,donut:{size:"55%",labels:{show:!0,value:{fontSize:"16px"},total:{show:!0,label:"Department Total",color:"#373d3f",formatter:function(e){return e.globals.seriesTotals.reduce(((e,t)=>e+t),0).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}}}}}}},setBarChartData(){return[{name:"Net Item Sales($)",data:this.analysisDeptsAmount},{name:"Transactions Count",data:this.analysisDeptsTransCount}]},setBarChartOptions(){return{chart:{type:"bar",fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',toolbar:{show:!0,tools:{download:!1}}},colors:["#48b99b","#2b90e5"],dataLabels:{enabled:!1},grid:{show:!1},legend:{markers:{radius:25}},plotOptions:{bar:{horizontal:!0,barHeight:"90%"}},stroke:{show:!0,width:.5,colors:["#fff"]},xaxis:{categories:this.analysisDeptsDisplay,labels:{show:!1}}}},deptsDiscount(){let e=0;for(let t of this.depts)e+=t.discount;return e},totalAnalysisTransCount(){let e=0;for(let t of this.analysisDepts)e+=t.trn_dep_cnt;return e}}},Ae=a(6262);const Me=(0,Ae.A)(xe,[["render",ge]]);var Re=Me}}]);
//# sourceMappingURL=675.3da24ea5.js.map